/*-----------------------------------------------------------------------
<copyright file="unsavedChanges.min.js" company="Tahoe Regional Planning Agency and Sitka Technology Group">
Copyright (c) Tahoe Regional Planning Agency and Sitka Technology Group. All rights reserved.
<author>Sitka Technology Group</author>
</copyright>

<license>
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License <http://www.gnu.org/licenses/> for more details.

Source code is available upon request via <support@sitkatech.com>.
</license>
-----------------------------------------------------------------------*/
function HookupCheckIfFormIsDirty(n,t,i,r){n=Sitka.Methods.isUndefinedNullOrEmpty(n)?"form":n;t=Sitka.Methods.isUndefinedNullOrEmpty(t)?":submit":t;i=Sitka.Methods.isUndefinedNullOrEmpty(i)?"You currently have unsaved changed. Save your changes or reload the page to submit this form.":n;r=Sitka.Methods.isUndefinedNullOrEmpty(r)?"You have unsaved changes.":r;var f=function(n){var t=n.find(":not(.ignoreSerialization)").serialize();return t!==n.data("formSerialization")},u=jQuery(n),e=jQuery(t);e.data("cachedOnClick",e.attr("onclick"));_.each(u,function(n){var r=jQuery(n),u;r.data("formSerialization",r.find(":not(.ignoreSerialization)").serialize());u=function(){if(f(r))jQuery(t+":not(:disabled)").attr("disabled",!0).attr("title",i).addClass("disabledByDirtyCheck").attr("onclick","event.preventDefault()");else{var n=jQuery(t+".disabledByDirtyCheck");n.attr("disabled",null).attr("title",null).attr("onclick",n.data("cachedOnClick"))}};r.on("input",u);r.find("input[type=radio], select").on("change",u)});jQuery(window).on("beforeunload",function(n){if(_.some(u,function(n){return f(jQuery(n))}))return r;n=null});u.on("submit",function(){jQuery(window).off("beforeunload")})}
//# sourceMappingURL=unsavedChanges.min.js.map
